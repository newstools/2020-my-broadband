Google parent Alphabet Inc. pledged $310 million to expand diversity efforts and resolve shareholder litigation that alleged the company’s board to failed to prevent sexual harassment and hid misconduct by executives. The settlement caps a controversy that shook the technology giant and reverberated across Silicon Valley. At the center of the lawsuit was a $90 million exit package for Google executive Andy Rubin, creator of the Android mobile operating system, who faced a sexual harassment investigation at the time. Thousands of Google employees staged a walkout in 2018 to protest the decision, prompting the company to change several workplace policies. A group of shareholders sued, alleging Google’s board and chief executive offer at the time, Larry Page, was aware of the allegations against Rubin when they approved his pay package. “This is a landmark settlement,” said Louise Renne, an attorney representing the shareholders. Her law firm described the outcome as the “largest and most holistic settlement” in a shareholder case involving sexual misconduct charges since 21st Century Fox Inc. settled a harassment suit in 2017. Alphabet also announced the creation of an independent audit board to oversee issues of harassment. After the employee walkout, Google ended mandatory arbitration for employees. The company said Friday it is extending that to other units beyond Google, such as Waymo and Verily. “Protecting our workplace and culture means getting both of these things right, and in recent years we’ve worked hard to set and uphold higher standards for the whole company,” Eileen Naughton, Google’s human resources chief, wrote in a note to employees on Friday. “Thank you for your clear feedback as we’ve advanced this work.”