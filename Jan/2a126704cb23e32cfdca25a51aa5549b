Amazon.com Inc. is back in fashion with investors. Concern about the cost of Amazon’s one-day delivery pledge lingered after a busy holiday period, holding the stock back while shares of rivals including Microsoft Corp., Google and Apple Inc. all rallied. That abruptly changed Thursday when Amazon reported results that crushed Wall Street estimates. Chief Executive Officer Jeff Bezos added to the enthusiasm by revealing the company has 150 million Prime subscribers who pay monthly or annual fees for shipping discounts and other perks, up from 100 million about two years ago. The stock surged 10% in extended trading. The largest U.S. e-commerce company has ramped up spending in several key parts of its business. In e-commerce, the company is rolling out one-day delivery to fight Walmart Inc. and other retailers. The Amazon Web Services cloud business is building new data centers and hiring engineers in response to steady gains by Microsoft Corp. and a renewed customer push from Alphabet Inc.’s Google. Meanwhile, Amazon continues to plow money into overseas markets such as India and Brazil. The results showed that these investments are paying off. Fourth-quarter sales climbed 21% to $87.4 billion and, profit rose to $6.47 a share, the Seattle-based company said in a statement. Analysts, on average, projected sales of $86.2 billion and earnings of $4.11 a share, according to data compiled by Bloomberg. Amazon’s forecasts for the current quarter matched expectations. “I’m shocked by the profits,” said Tom Forte, analyst at DA Davidson & Co. “I thought the story was going to be how investments in next-day shipping pushed profits down.” The big increase in Prime subscriptions suggests Amazon is luring overseas shoppers as the U.S. market saturates. Prime members spend about twice as much as other customers. “This shows how big of a step one-day delivery was in terms of maintaining engagement on its marketplace,” said RJ Hottovy, an equity analyst at Morningstar Inc. “The Prime membership number shows they are seeing strong growth internationally.” There was good news for investors in nearly every part of Amazon’s business. Cloud-computing and online sales beat analysts’ expectations. Shipping costs grew at a slower pace than in the third quarter, showing Amazon is making its delivery network more efficient. The only issue was Whole Foods groceries, with revenue from physical stores declining marginally from a year ago. Before the results, some analysts were particularly concerned about slowing growth and rising costs at Amazon Web Services, the source of about two-thirds of Amazon’s operating income in recent years. Thursday’s report eased those worries for now. AWS generated revenue of $10 billion in the fourth quarter, up 34% from a year earlier. Operating income grew 19% to $2.6 billion. Even the Whole Foods blemish had a shiny side. Chief Financial Officer Brian Olsavsky said grocery deliveries in the fourth quarter doubled from the same period a year ago, so Amazon is increasing grocery sales even if in-store shopping is down. He attributed the growth to Amazon eliminating a $14.99 monthly fee for its grocery delivery service Amazon Fresh. “We don’t care much whether it’s in store or delivered,” he said. Shares jumped to a high of $2,133.75 in extended trading, putting the company on course for a $1 trillion valuation on Friday. The stock closed at $1,870.68 in New York. Amazon had climbed about 12% in the past year, lagging behind tech industry peers. “Earnings weren’t any better than they were last year, but the stock shot up because everyone thought earnings would be terrible,” said Sucharita Kodali, an analyst at Forrester Research Inc. “Amazon had been sandbagging the numbers by scaring everyone about the cost of next-day shipping.”